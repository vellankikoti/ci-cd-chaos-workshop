{% extends "base.html" %}

{% block title %}Upload Screenshot - CI/CD Chaos Workshop{% endblock %}

{% block content %}
<div class="main-container">
    <h1>Upload Screenshot</h1>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash-message flash-{{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <!-- Upload Form -->
    <div class="card">
        <h3 class="card-title">Upload Your Screenshot</h3>
        
        <form method="POST" enctype="multipart/form-data" class="upload-form">
            <div class="form-group">
                <label for="scenario">Select Scenario:</label>
                <select name="scenario" id="scenario" required>
                    <option value="">Choose a scenario...</option>
                    <option value="docker_build">Docker Build Scenario</option>
                    <option value="testcontainers">TestContainers Scenario</option>
                    <option value="html_reports">HTML Reports Scenario</option>
                    <option value="secrets_management">Secrets Management Scenario</option>
                    <option value="eks_deployment">EKS Deployment Scenario</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="screenshot">Screenshot File:</label>
                <input type="file" name="screenshot" id="screenshot" accept="image/*" required>
                <small class="form-help">Accepted formats: PNG, JPG, JPEG, GIF (max 5MB)</small>
            </div>
            
            <div class="form-group">
                <label for="description">Description (Optional):</label>
                <textarea name="description" id="description" rows="3" placeholder="Describe what you accomplished in this scenario..."></textarea>
            </div>
            
            <button type="submit" class="btn">üì§ Upload Screenshot</button>
        </form>
    </div>
    
    <!-- Upload Guidelines -->
    <div class="card">
        <h3 class="card-title">Upload Guidelines</h3>
        
        <div class="guidelines-grid">
            <div class="guideline-item">
                <h4>üì∏ Screenshot Requirements</h4>
                <ul>
                    <li>Clear, readable screenshots</li>
                    <li>Show completed tasks or results</li>
                    <li>Include relevant terminal output</li>
                    <li>Maximum file size: 5MB</li>
                </ul>
            </div>
            
            <div class="guideline-item">
                <h4>‚úÖ What to Include</h4>
                <ul>
                    <li>Successful test results</li>
                    <li>Completed build outputs</li>
                    <li>Working application screens</li>
                    <li>Deployment confirmations</li>
                </ul>
            </div>
            
            <div class="guideline-item">
                <h4>‚ùå What to Avoid</h4>
                <ul>
                    <li>Blurry or unclear images</li>
                    <li>Error messages only</li>
                    <li>Unrelated screenshots</li>
                    <li>Files larger than 5MB</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Recent Uploads -->
    <div class="card">
        <h3 class="card-title">Recent Uploads</h3>
        
        {% if recent_uploads %}
        <div class="uploads-list">
            {% for upload in recent_uploads %}
            <div class="upload-item">
                <div class="upload-info">
                    <div class="upload-title">{{ upload.scenario_name }}</div>
                    <div class="upload-meta">
                        <span class="upload-date">{{ upload.uploaded_at.strftime('%Y-%m-%d %H:%M') }}</span>
                        <span class="upload-status status-{{ upload.status }}">
                            {% if upload.verified %}‚úÖ Verified{% else %}‚è≥ Pending{% endif %}
                        </span>
                    </div>
                </div>
                <div class="upload-actions">
                    <a href="{{ url_for('app.view_screenshot', screenshot_id=upload.id) }}" class="btn btn-small">View</a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="text-muted">No uploads yet. Upload your first screenshot to get started!</p>
        {% endif %}
    </div>
    
    <!-- Navigation -->
    <div class="text-center">
        <a href="{{ url_for('app.dashboard') }}" class="btn">‚Üê Back to Dashboard</a>
        <a href="{{ url_for('app.progress') }}" class="btn">View Progress</a>
    </div>
</div>
{% endblock %} 